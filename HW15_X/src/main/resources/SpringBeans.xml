<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns="http://www.springframework.org/schema/beans"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean id="cacheEngine" class="ru.otus.db.beans.CacheEngineBean">
        <constructor-arg name="lifeTimeMs" value="1000"/>
        <constructor-arg name="idleTimeMs" value="0"/>
        <constructor-arg name="maxElements" value="1000"/>
        <constructor-arg name="isEternal" value="false"/>
    </bean>

    <bean id="dbServiceBase" class="ru.otus.db.hibernateStorage.DbServiceHibernateImpl"/>

    <!--<bean id="dbServiceCached" class="ru.otus.db.cachedstorage.DbServiceCached">-->
        <!--<constructor-arg name="decoratedService" ref="dbServiceBase"/>-->
        <!--<constructor-arg name="cache" ref="cacheEngine"/>-->
    <!--</bean>-->

    <bean id="loadingEmulator" class="ru.otus.frontend.LoadingEmulator">
        <constructor-arg name="dbService" ref="dbServiceBase"/>
    </bean>

    <bean id="templateProcessor" class="ru.otus.frontend.servlet.TemplateProcessor"/>

    <bean id="MessageSystem" class="ru.otus.messageSystem.MessageSystem" destroy-method="dispose"/>

    <bean id="messageSystemContext" class="ru.otus.client.MessageSystemContext" autowire="byName">
        <constructor-arg name="messageSystem" ref="MessageSystem"/>
    </bean>

    <bean id="FrontendService" class="ru.otus.frontend.FrontendServiceImpl" init-method="init">
        <constructor-arg name="address" value="Frontend"/>
        <constructor-arg name="context" ref="messageSystemContext"/>
    </bean>

    <bean id="DbService" class="ru.otus.db.DbServiceImpl" init-method="init">
        <constructor-arg name="address" value="DbService"/>
        <constructor-arg name="context" ref="messageSystemContext"/>
        <constructor-arg name="dbService" ref="dbServiceBase"/>
    </bean>
</beans>